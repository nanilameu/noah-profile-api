from flask import Flask, request, jsonify
from flask_cors import CORS
import os

app = Flask(__name__)
CORS(app)

@app.route('/get_profile', methods=['POST'])
def get_profile():
    data = request.get_json()
    email = data.get('email', '')

    # Aqui você vai colocar a lógica que busca o perfil do usuário no Airtable.
    # Neste exemplo, estou só retornando um perfil mockado para teste.

    profile = {
        "email": email,
        "nome": "Usuário de Teste",
        "area_atuacao": "Arquitetura e Urbanismo",
        "cidade_estado": "Campo Grande / MS",
        "registro_profissional": "CAU A237211-8",
        "meta_faturamento": "R$ 10.000,00",
        "custos_fixos_variaveis": "R$ 5.000,00",
        "links_portfolio": "https://seuportfolio.com",
        "status": "ativo"
    }

    return jsonify(profile), 200

if __name__ == '__main__':
    # ESSA LINHA QUE FALTAVA para o Render conseguir expor a API
    app.run(host='0.0.0.0', port=int(os.environ.get("PORT", 5000)))
